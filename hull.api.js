/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

//     Underscore.js 1.5.2
//     http://underscorejs.org
//     (c) 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

/*!
 * Cookies.js - 0.3.1
 * Wednesday, April 24 2013 @ 2:28 AM EST
 *
 * Copyright (c) 2013, Scott Hamper
 * Licensed under the MIT license,
 * http://www.opensource.org/licenses/MIT
 */

/*!
  * domready (c) Dustin Diaz 2012 - License MIT
  */

/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/*!
 * xdm.js – Nicolas Gallagher – MIT License
 * easyXDM – Copyright(c) 2009-2011, Øyvind Sean Kinsey, oyvind@kinsey.no – MIT License
 */

(function(){var e,t,n,r={},i="api";(function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){v=v.slice(0,v.length-1),e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("requireLib",function(){}),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=i.toString,l=i.hasOwnProperty,c=r.forEach,h=r.map,p=r.reduce,d=r.reduceRight,v=r.filter,m=r.every,g=r.some,y=r.indexOf,b=r.lastIndexOf,w=Array.isArray,E=Object.keys,S=s.bind,x=function(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=x),exports._=x):e._=x,x.VERSION="1.5.2";var T=x.each=x.forEach=function(e,t,r){if(e==null)return;if(c&&e.forEach===c)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else{var o=x.keys(e);for(var i=0,s=o.length;i<s;i++)if(t.call(r,e[o[i]],o[i],e)===n)return}};x.map=x.collect=function(e,t,n){var r=[];return e==null?r:h&&e.map===h?e.map(t,n):(T(e,function(e,i,s){r.push(t.call(n,e,i,s))}),r)};var N="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(p&&e.reduce===p)return r&&(t=x.bind(t,r)),i?e.reduce(t,n):e.reduce(t);T(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError(N);return n},x.reduceRight=x.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduceRight===d)return r&&(t=x.bind(t,r)),i?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=x.keys(e);s=o.length}T(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError(N);return n},x.find=x.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},x.filter=x.select=function(e,t,n){var r=[];return e==null?r:v&&e.filter===v?e.filter(t,n):(T(e,function(e,i,s){t.call(n,e,i,s)&&r.push(e)}),r)},x.reject=function(e,t,n){return x.filter(e,function(e,r,i){return!t.call(n,e,r,i)},n)},x.every=x.all=function(e,t,r){t||(t=x.identity);var i=!0;return e==null?i:m&&e.every===m?e.every(t,r):(T(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=x.some=x.any=function(e,t,r){t||(t=x.identity);var i=!1;return e==null?i:g&&e.some===g?e.some(t,r):(T(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};x.contains=x.include=function(e,t){return e==null?!1:y&&e.indexOf===y?e.indexOf(t)!=-1:C(e,function(e){return e===t})},x.invoke=function(e,t){var n=u.call(arguments,2),r=x.isFunction(t);return x.map(e,function(e){return(r?t:e[t]).apply(e,n)})},x.pluck=function(e,t){return x.map(e,function(e){return e[t]})},x.where=function(e,t,n){return x.isEmpty(t)?n?void 0:[]:x[n?"find":"filter"](e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},x.findWhere=function(e,t){return x.where(e,t,!0)},x.max=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&x.isEmpty(e))return-Infinity;var r={computed:-Infinity,value:-Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>r.computed&&(r={value:e,computed:o})}),r.value},x.min=function(e,t,n){if(!t&&x.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&x.isEmpty(e))return Infinity;var r={computed:Infinity,value:Infinity};return T(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},x.shuffle=function(e){var t,n=0,r=[];return T(e,function(e){t=x.random(n++),r[n-1]=r[t],r[t]=e}),r},x.sample=function(e,t,n){return arguments.length<2||n?e[x.random(e.length-1)]:x.shuffle(e).slice(0,Math.max(0,t))};var k=function(e){return x.isFunction(e)?e:function(t){return t[e]}};x.sortBy=function(e,t,n){var r=k(t);return x.pluck(x.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={},s=n==null?x.identity:k(n);return T(t,function(n,o){var u=s.call(r,n,o,t);e(i,u,n)}),i}};x.groupBy=L(function(e,t,n){(x.has(e,t)?e[t]:e[t]=[]).push(n)}),x.indexBy=L(function(e,t,n){e[t]=n}),x.countBy=L(function(e,t){x.has(e,t)?e[t]++:e[t]=1}),x.sortedIndex=function(e,t,n,r){n=n==null?x.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},x.toArray=function(e){return e?x.isArray(e)?u.call(e):e.length===+e.length?x.map(e,x.identity):x.values(e):[]},x.size=function(e){return e==null?0:e.length===+e.length?e.length:x.keys(e).length},x.first=x.head=x.take=function(e,t,n){return e==null?void 0:t==null||n?e[0]:u.call(e,0,t)},x.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},x.last=function(e,t,n){return e==null?void 0:t==null||n?e[e.length-1]:u.call(e,Math.max(e.length-t,0))},x.rest=x.tail=x.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},x.compact=function(e){return x.filter(e,x.identity)};var A=function(e,t,n){return t&&x.every(e,x.isArray)?a.apply(n,e):(T(e,function(e){x.isArray(e)||x.isArguments(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n)};x.flatten=function(e,t){return A(e,t,[])},x.without=function(e){return x.difference(e,u.call(arguments,1))},x.uniq=x.unique=function(e,t,n,r){x.isFunction(t)&&(r=n,n=t,t=!1);var i=n?x.map(e,n,r):e,s=[],o=[];return T(i,function(n,r){if(t?!r||o[o.length-1]!==n:!x.contains(o,n))o.push(n),s.push(e[r])}),s},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(e){var t=u.call(arguments,1);return x.filter(x.uniq(e),function(e){return x.every(t,function(t){return x.indexOf(t,e)>=0})})},x.difference=function(e){var t=a.apply(r,u.call(arguments,1));return x.filter(e,function(e){return!x.contains(t,e)})},x.zip=function(){var e=x.max(x.pluck(arguments,"length").concat(0)),t=new Array(e);for(var n=0;n<e;n++)t[n]=x.pluck(arguments,""+n);return t},x.object=function(e,t){if(e==null)return{};var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},x.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=x.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(y&&e.indexOf===y)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},x.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(b&&e.lastIndexOf===b)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},x.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};x.bind=function(e,t){var n,r;if(S&&e.bind===S)return S.apply(e,u.call(arguments,1));if(!x.isFunction(e))throw new TypeError;return n=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=e.prototype;var i=new O;O.prototype=null;var s=e.apply(i,n.concat(u.call(arguments)));return Object(s)===s?s:i}return e.apply(t,n.concat(u.call(arguments)))}},x.partial=function(e){var t=u.call(arguments,1);return function(){return e.apply(this,t.concat(u.call(arguments)))}},x.bindAll=function(e){var t=u.call(arguments,1);if(t.length===0)throw new Error("bindAll must be passed function names");return T(t,function(t){e[t]=x.bind(e[t],e)}),e},x.memoize=function(e,t){var n={};return t||(t=x.identity),function(){var r=t.apply(this,arguments);return x.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},x.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},x.defer=function(e){return x.delay.apply(x,[e,1].concat(u.call(arguments,1)))},x.throttle=function(e,t,n){var r,i,s,o=null,u=0;n||(n={});var a=function(){u=n.leading===!1?0:new Date,o=null,s=e.apply(r,i)};return function(){var f=new Date;!u&&n.leading===!1&&(u=f);var l=t-(f-u);return r=this,i=arguments,l<=0?(clearTimeout(o),o=null,u=f,s=e.apply(r,i)):!o&&n.trailing!==!1&&(o=setTimeout(a,l)),s}},x.debounce=function(e,t,n){var r,i,s,o,u;return function(){s=this,i=arguments,o=new Date;var a=function(){var f=new Date-o;f<t?r=setTimeout(a,t-f):(r=null,n||(u=e.apply(s,i)))},f=n&&!r;return r||(r=setTimeout(a,t)),f&&(u=e.apply(s,i)),u}},x.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},x.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},x.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},x.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},x.keys=E||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)x.has(e,n)&&t.push(n);return t},x.values=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=e[t[i]];return r},x.pairs=function(e){var t=x.keys(e),n=t.length,r=new Array(n);for(var i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},x.invert=function(e){var t={},n=x.keys(e);for(var r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},x.functions=x.methods=function(e){var t=[];for(var n in e)x.isFunction(e[n])&&t.push(n);return t.sort()},x.extend=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},x.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return T(n,function(n){n in e&&(t[n]=e[n])}),t},x.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)x.contains(n,i)||(t[i]=e[i]);return t},x.defaults=function(e){return T(u.call(arguments,1),function(t){if(t)for(var n in t)e[n]===void 0&&(e[n]=t[n])}),e},x.clone=function(e){return x.isObject(e)?x.isArray(e)?e.slice():x.extend({},e):e},x.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var i=f.call(e);if(i!=f.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;var o=e.constructor,u=t.constructor;if(o!==u&&!(x.isFunction(o)&&o instanceof o&&x.isFunction(u)&&u instanceof u))return!1;n.push(e),r.push(t);var a=0,l=!0;if(i=="[object Array]"){a=e.length,l=a==t.length;if(l)while(a--)if(!(l=M(e[a],t[a],n,r)))break}else{for(var c in e)if(x.has(e,c)){a++;if(!(l=x.has(t,c)&&M(e[c],t[c],n,r)))break}if(l){for(c in t)if(x.has(t,c)&&!(a--))break;l=!a}}return n.pop(),r.pop(),l};x.isEqual=function(e,t){return M(e,t,[],[])},x.isEmpty=function(e){if(e==null)return!0;if(x.isArray(e)||x.isString(e))return e.length===0;for(var t in e)if(x.has(e,t))return!1;return!0},x.isElement=function(e){return!!e&&e.nodeType===1},x.isArray=w||function(e){return f.call(e)=="[object Array]"},x.isObject=function(e){return e===Object(e)},T(["Arguments","Function","String","Number","Date","RegExp"],function(e){x["is"+e]=function(t){return f.call(t)=="[object "+e+"]"}}),x.isArguments(arguments)||(x.isArguments=function(e){return!!e&&!!x.has(e,"callee")}),typeof /./!="function"&&(x.isFunction=function(e){return typeof e=="function"}),x.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},x.isNaN=function(e){return x.isNumber(e)&&e!=+e},x.isBoolean=function(e){return e===!0||e===!1||f.call(e)=="[object Boolean]"},x.isNull=function(e){return e===null},x.isUndefined=function(e){return e===void 0},x.has=function(e,t){return l.call(e,t)},x.noConflict=function(){return e._=t,this},x.identity=function(e){return e},x.times=function(e,t,n){var r=Array(Math.max(0,e));for(var i=0;i<e;i++)r[i]=t.call(n,i);return r},x.random=function(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};_.unescape=x.invert(_.escape);var D={escape:new RegExp("["+x.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(_.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(e){x[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),x.result=function(e,t){if(e==null)return void 0;var n=e[t];return x.isFunction(n)?n.call(e):n},x.mixin=function(e){T(x.functions(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(x,e))}})};var P=0;x.uniqueId=function(e){var t=++P+"";return e?e+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(e,t,n){var r;n=x.defaults({},n,x.templateSettings);var i=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),s=0,o="__p+='";e.replace(i,function(t,n,r,i,u){return o+=e.slice(s,u).replace(j,function(e){return"\\"+B[e]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),s=u+t.length,t}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=new Function(n.variable||"obj","_",o)}catch(u){throw u.source=o,u}if(t)return r(t,x);var a=function(e){return r.call(this,e,x)};return a.source="function("+(n.variable||"obj")+"){\n"+o+"}",a},x.chain=function(e){return x(e).chain()};var F=function(e){return this._chain?x(e).chain():e};x.mixin(x),T(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];x.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),T(["concat","join","slice"],function(e){var t=r[e];x.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),n("underscore",function(e){return function(){var t,n;return t||e._}}(this)),function(e){var t=function(e,n,r){return arguments.length===1?t.get(e):t.set(e,n,r)};t._document=document,t._navigator=navigator,t.defaults={path:"/"},t.get=function(e){return t._cachedDocumentCookie!==t._document.cookie&&t._renewCache(),t._cache[e]},t.set=function(n,r,i){return i=t._getExtendedOptions(i),i.expires=t._getExpiresDate(r===e?-1:i.expires),t._document.cookie=t._generateCookieString(n,r,i),t},t.expire=function(n,r){return t.set(n,e,r)},t._getExtendedOptions=function(n){return{path:n&&n.path||t.defaults.path,domain:n&&n.domain||t.defaults.domain,expires:n&&n.expires||t.defaults.expires,secure:n&&n.secure!==e?n.secure:t.defaults.secure}},t._isValidDate=function(e){return Object.prototype.toString.call(e)==="[object Date]"&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){n=n||new Date;switch(typeof e){case"number":e=new Date(n.getTime()+e*1e3);break;case"string":e=new Date(e)}if(e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){e=encodeURIComponent(e),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var r=e+"="+t;return r+=n.path?";path="+n.path:"",r+=n.domain?";domain="+n.domain:"",r+=n.expires?";expires="+n.expires.toGMTString():"",r+=n.secure?";secure":"",r},t._getCookieObjectFromString=function(n){var r={},i=n?n.split("; "):[];for(var s=0;s<i.length;s++){var o=t._getKeyValuePairFromCookieString(i[s]);r[o.key]===e&&(r[o.key]=o.value)}return r},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");return t=t<0?e.length:t,{key:decodeURIComponent(e.substr(0,t)),value:decodeURIComponent(e.substr(t+1))}},t._renewCache=function(){t._cache=t._getCookieObjectFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){return t._navigator.cookieEnabled||t.set("cookies.js",1).get("cookies.js")==="1"},t.enabled=t._areEnabled(),typeof n=="function"&&n.amd?n("cookie",[],function(){return t}):typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=t),exports.Cookies=t):window.Cookies=t}(),function(){var e=typeof window!="undefined"?window:exports,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=function(){try{document.createElement("$")}catch(e){return e}}();e.btoa||(e.btoa=function(e){for(var r,i,s=0,o=t,u="";e.charAt(s|0)||(o="=",s%1);u+=o.charAt(63&r>>8-s%1*8)){i=e.charCodeAt(s+=.75);if(i>255)throw n;r=r<<8|i}return u}),e.atob||(e.atob=function(e){e=e.replace(/=+$/,"");if(e.length%4==1)throw n;for(var r=0,i,s,o=0,u="";s=e.charAt(o++);~s&&(i=r%4?i*64+s:s,r++%4)?u+=String.fromCharCode(255&i>>(-2*r&6)):0)s=t.indexOf(s);return u})}(),n("base64",function(){}),!function(e,t){typeof module!="undefined"?module.exports=t():typeof n=="function"&&typeof n.amd=="object"?n("domready",t):this[e]=t()}("domready",function(e){function p(e){h=1;while(e=t.shift())e()}var t=[],n,r=!1,i=document,s=i.documentElement,o=s.doScroll,u="DOMContentLoaded",a="addEventListener",f="onreadystatechange",l="readyState",c=o?/^loaded|^c/:/^loaded|c/,h=c.test(i[l]);return i[a]&&i[a](u,n=function(){i.removeEventListener(u,n,r),p()},r),o&&i.attachEvent(f,n=function(){/^c/.test(i[l])&&(i.detachEvent(f,n),p())}),e=o?function(n){self!=top?h?n():t.push(n):function(){try{s.doScroll("left")}catch(t){return setTimeout(function(){e(n)},50)}n()}()}:function(e){h?e():t.push(e)}}),!function(e,t){function s(){this._events={},this._conf&&o.call(this,this._conf)}function o(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners&&(this._events.maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),this.wildcard&&(this.listenerTree={}))}function u(e){this._events={},this.newListener=!1,o.call(this,e)}function a(e,t,n,r){if(!n)return[];var i=[],s,o,u,f,l,c,h,p=t.length,d=t[r],v=t[r+1];if(r===p&&n._listeners){if(typeof n._listeners=="function")return e&&e.push(n._listeners),[n];for(s=0,o=n._listeners.length;s<o;s++)e&&e.push(n._listeners[s]);return[n]}if(d==="*"||d==="**"||n[d]){if(d==="*"){for(u in n)u!=="_listeners"&&n.hasOwnProperty(u)&&(i=i.concat(a(e,t,n[u],r+1)));return i}if(d==="**"){h=r+1===p||r+2===p&&v==="*",h&&n._listeners&&(i=i.concat(a(e,t,n,p)));for(u in n)u!=="_listeners"&&n.hasOwnProperty(u)&&(u==="*"||u==="**"?(n[u]._listeners&&!h&&(i=i.concat(a(e,t,n[u],p))),i=i.concat(a(e,t,n[u],r))):u===v?i=i.concat(a(e,t,n[u],r+2)):i=i.concat(a(e,t,n[u],r)));return i}i=i.concat(a(e,t,n[d],r+1))}f=n["*"],f&&a(e,t,f,r+1),l=n["**"];if(l)if(r<p){l._listeners&&a(e,t,l,p);for(u in l)u!=="_listeners"&&l.hasOwnProperty(u)&&(u===v?a(e,t,l[u],r+2):u===d?a(e,t,l[u],r+1):(c={},c[u]=l[u],a(e,t,{"**":c},r+1)))}else l._listeners?a(e,t,l,p):l["*"]&&l["*"]._listeners&&a(e,t,l["*"],p);return i}function f(e,t){e=typeof e=="string"?e.split(this.delimiter):e.slice();for(var n=0,s=e.length;n+1<s;n++)if(e[n]==="**"&&e[n+1]==="**")return;var o=this.listenerTree,u=e.shift();while(u){o[u]||(o[u]={}),o=o[u];if(e.length===0){if(!o._listeners)o._listeners=t;else if(typeof o._listeners=="function")o._listeners=[o._listeners,t];else if(r(o._listeners)){o._listeners.push(t);if(!o._listeners.warned){var a=i;typeof this._events.maxListeners!="undefined"&&(a=this._events.maxListeners),a>0&&o._listeners.length>a&&(o._listeners.warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",o._listeners.length),console.trace())}}return!0}u=e.shift()}return!0}var r=Array.isArray?Array.isArray:function(t){return Object.prototype.toString.call(t)==="[object Array]"},i=10;u.prototype.delimiter=".",u.prototype.setMaxListeners=function(e){this._events||s.call(this),this._events.maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e},u.prototype.event="",u.prototype.once=function(e,t){return this.many(e,1,t),this},u.prototype.many=function(e,t,n){function i(){--t===0&&r.off(e,i),n.apply(this,arguments)}var r=this;if(typeof n!="function")throw new Error("many only accepts instances of Function");return i._origin=n,this.on(e,i),r},u.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if(e==="newListener"&&!this.newListener&&!this._events.newListener)return!1;if(this._all){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];for(r=0,t=this._all.length;r<t;r++)this.event=e,this._all[r].apply(this,n)}if(e==="error"&&!this._all&&!this._events.error&&(!this.wildcard||!this.listenerTree.error))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");var i;if(this.wildcard){i=[];var o=typeof e=="string"?e.split(this.delimiter):e.slice();a.call(this,i,o,this.listenerTree,0)}else i=this._events[e];if(typeof i=="function"){this.event=e;if(arguments.length===1)i.call(this);else if(arguments.length>1)switch(arguments.length){case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];i.apply(this,n)}return!0}if(i){var t=arguments.length,n=new Array(t-1);for(var r=1;r<t;r++)n[r-1]=arguments[r];var u=i.slice();for(var r=0,t=u.length;r<t;r++)this.event=e,u[r].apply(this,n);return u.length>0||this._all}return this._all},u.prototype.on=function(e,t){if(typeof e=="function")return this.onAny(e),this;if(typeof t!="function")throw new Error("on only accepts instances of Function");this._events||s.call(this),this.emit("newListener",e,t);if(this.wildcard)return f.call(this,e,t),this;if(!this._events[e])this._events[e]=t;else if(typeof this._events[e]=="function")this._events[e]=[this._events[e],t];else if(r(this._events[e])){this._events[e].push(t);if(!this._events[e].warned){var n=i;typeof this._events.maxListeners!="undefined"&&(n=this._events.maxListeners),n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace())}}return this},u.prototype.onAny=function(e){this._all||(this._all=[]);if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all.push(e),this},u.prototype.addListener=u.prototype.on,u.prototype.off=function(e,t){if(typeof t!="function")throw new Error("removeListener only takes instances of Function");var n,i=[];if(this.wildcard){var s=typeof e=="string"?e.split(this.delimiter):e.slice();i=a.call(this,null,s,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n})}for(var o=0;o<i.length;o++){var u=i[o];n=u._listeners;if(r(n)){var f=-1;for(var l=0,c=n.length;l<c;l++)if(n[l]===t||n[l].listener&&n[l].listener===t||n[l]._origin&&n[l]._origin===t){f=l;break}if(f<0)continue;return this.wildcard?u._listeners.splice(f,1):this._events[e].splice(f,1),n.length===0&&(this.wildcard?delete u._listeners:delete this._events[e]),this}if(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)this.wildcard?delete u._listeners:delete this._events[e]}return this},u.prototype.offAny=function(e){var t=0,n=0,r;if(e&&this._all&&this._all.length>0){r=this._all;for(t=0,n=r.length;t<n;t++)if(e===r[t])return r.splice(t,1),this}else this._all=[];return this},u.prototype.removeListener=u.prototype.off,u.prototype.removeAllListeners=function(e){if(arguments.length===0)return!this._events||s.call(this),this;if(this.wildcard){var t=typeof e=="string"?e.split(this.delimiter):e.slice(),n=a.call(this,null,t,this.listenerTree,0);for(var r=0;r<n.length;r++){var i=n[r];i._listeners=null}}else{if(!this._events[e])return this;this._events[e]=null}return this},u.prototype.listeners=function(e){if(this.wildcard){var t=[],n=typeof e=="string"?e.split(this.delimiter):e.slice();return a.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),r(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},u.prototype.listenersAny=function(){return this._all?this._all:[]},typeof n=="function"&&n.amd?n("eventemitter",[],function(){return u}):e.EventEmitter2=u}(typeof process!="undefined"&&typeof process.title!="undefined"&&typeof exports!="undefined"?exports:window),function(){var e;e=["on","onAny","offAny","once","many","off","removeAllListeners","listeners","listenersAny","emit","setMaxListeners"],n("lib/utils/emitter",["underscore","eventemitter"],function(t,n){return function(){var r,i,s,o,u;s=new n({wildcard:!0,delimiter:".",newListener:!1,maxListeners:100}),r={};for(o=0,u=e.length;o<u;o++)i=e[o],r[i]=t.bind(s[i],s);return r}})}.call(this),function(){n("lib/utils/cookies",["cookie"],function(e){return{set:e.set,get:e.get,remove:e.expire}})}.call(this),n("lib/utils/version",[],function(){return"0.8.1"}),function(){n("lib/api/params",["underscore"],function(e){var t,n,r;return t="hull",r=function(e){return[e,t,{}]},n=function(e){var n,r,i;return r=e.path,i=e.provider||t,n=e.params||{},[r,i,n]},{parse:function(t){var i,s,o,u,a,f,l,c,h,p,d,v;s=t.shift(),e.isString(s)&&(d=r(s),l=d[0],c=d[1],f=d[2]),e.isObject(s)&&(v=n(s),l=v[0],c=v[1],f=v[2]);if(!l)throw"No URI provided for the API call";l[0]==="/"&&(l=l.substring(1)),h=[],f!=null&&h.push(f),h=h.concat(t),i=o=null,f={};while(a=h.shift()){p=typeof a;if(p==="string"&&!u)u=a.toLowerCase();else if(p==="function"&&(!i||!o))i?o||(o=a):i=a;else{if(p!=="object")throw new TypeError("Invalid argument passed to Hull.api(): "+a);f=e.extend(f,a)}}return u==null&&(u="get"),i==null&&(i=function(){}),o==null&&(o=function(e){return console.error("The request has failed: ",e)}),[{provider:c,path:l,method:u,params:f},i,o]}}})}.call(this),function(e){if(typeof bootstrap=="function")bootstrap("promise",e);else if(typeof exports=="object")module.exports=e();else if(typeof n=="function"&&n.amd)n("promises",e);else if(typeof ses!="undefined"){if(!ses.ok())return;ses.makeQ=e}else Q=e()}(function(){function u(e){return function(){return o.apply(e,arguments)}}function m(e){return e===Object(e)}function g(e){return v(e)==="[object StopIteration]"||e instanceof y}function E(t,n){if(e&&n.stack&&typeof t=="object"&&t!==null&&t.stack&&t.stack.indexOf(w)===-1){var r=[];for(var i=n;!!i;i=i.source)i.stack&&r.unshift(i.stack);r.unshift(t.stack);var s=r.join("\n"+w+"\n");t.stack=S(s)}}function S(e){var t=e.split("\n"),n=[];for(var r=0;r<t.length;++r){var i=t[r];!N(i)&&!x(i)&&i&&n.push(i)}return n.join("\n")}function x(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function T(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);if(r)return[r[1],Number(r[2])]}function N(e){var t=T(e);if(!t)return!1;var i=t[0],s=t[1];return i===r&&s>=n&&s<=lt}function C(){if(!e)return;try{throw new Error}catch(t){var n=t.stack.split("\n"),i=n[0].indexOf("@")>0?n[1]:n[2],s=T(i);if(!s)return;return r=s[0],s[1]}}function k(e,t,n){return function(){return typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(t+" is deprecated, use "+n+" instead.",(new Error("")).stack),e.apply(e,arguments)}}function L(e){return H(e)?e:B(e)?G(e):Q(e)}function A(){function l(e){r=e,o.source=e,f(t,function(t,n){s(function(){e.promiseDispatch.apply(e,n)})},void 0),t=void 0,n=void 0}var t=[],n=[],r,i=h(A.prototype),o=h(_.prototype);o.promiseDispatch=function(e,i,o){var u=a(arguments);t?(t.push(u),i==="when"&&o[1]&&n.push(o[1])):s(function(){r.promiseDispatch.apply(r,u)})},o.valueOf=k(function(){if(t)return o;var e=P(r);return H(e)&&(r=e),e},"valueOf","inspect"),o.inspect=function(){return r?r.inspect():{state:"pending"}};if(L.longStackSupport&&e)try{throw new Error}catch(u){o.stack=u.stack.substring(u.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(e){if(r)return;l(L(e))},i.fulfill=function(e){if(r)return;l(Q(e))},i.reject=function(e){if(r)return;l(K(e))},i.notify=function(e){if(r)return;f(n,function(t,n){s(function(){n(e)})},void 0)},i}function O(e){if(typeof e!="function")throw new TypeError("resolver must be a function.");var t=A();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function M(e){return O(function(t,n){for(var r=0,i=e.length;r<i;r++)L(e[r]).then(t,n)})}function _(e,t,n){t===void 0&&(t=function(e){return K(new Error("Promise does not support operation: "+e))}),n===void 0&&(n=function(){return{state:"unknown"}});var r=h(_.prototype);r.promiseDispatch=function(n,i,s){var o;try{e[i]?o=e[i].apply(r,s):o=t.call(r,i,s)}catch(u){o=K(u)}n&&n(o)},r.inspect=n;if(n){var i=n();i.state==="rejected"&&(r.exception=i.reason),r.valueOf=k(function(){var e=n();return e.state==="pending"||e.state==="rejected"?r:e.value})}return r}function D(e,t,n,r){return L(e).then(t,n,r)}function P(e){if(H(e)){var t=e.inspect();if(t.state==="fulfilled")return t.value}return e}function H(e){return m(e)&&typeof e.promiseDispatch=="function"&&typeof e.inspect=="function"}function B(e){return m(e)&&typeof e.then=="function"}function j(e){return H(e)&&e.inspect().state==="pending"}function F(e){return!H(e)||e.inspect().state==="fulfilled"}function I(e){return H(e)&&e.inspect().state==="rejected"}function W(){!U&&typeof window!="undefined"&&!window.Touch&&window.console&&console.warn("[Q] Unhandled rejection reasons (should be empty):",q),U=!0}function X(){for(var e=0;e<q.length;e++){var t=q[e];console.warn("Unhandled rejection reason:",t)}}function V(){q.length=0,R.length=0,U=!1,z||(z=!0,typeof process!="undefined"&&process.on&&process.on("exit",X))}function $(e,t){if(!z)return;R.push(e),t&&typeof t.stack!="undefined"?q.push(t.stack):q.push("(no stack) "+t),W()}function J(e){if(!z)return;var t=l(R,e);t!==-1&&(R.splice(t,1),q.splice(t,1))}function K(e){var t=_({when:function(t){return t&&J(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return $(t,e),t}function Q(e){return _({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return t===null||t===void 0?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return d(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function G(e){var t=A();return s(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function Y(e){return _({isDef:function(){}},function(n,r){return it(e,n,r)},function(){return L(e).inspect()})}function Z(e,t,n){return L(e).spread(t,n)}function et(e){return function(){function t(e,t){var s;if(b){try{s=n[e](t)}catch(o){return K(o)}return s.done?s.value:D(s.value,r,i)}try{s=n[e](t)}catch(o){return g(o)?o.value:K(o)}return D(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}}function tt(e){L.done(L.async(e)())}function nt(e){throw new y(e)}function rt(e){return function(){return Z([this,st(arguments)],function(t,n){return e.apply(t,n)})}}function it(e,t,n){return L(e).dispatch(t,n)}function st(e){return D(e,function(e){var t=0,n=A();return f(e,function(r,i,s){var o;H(i)&&(o=i.inspect()).state==="fulfilled"?e[s]=o.value:(++t,D(i,function(r){e[s]=r,--t===0&&n.resolve(e)},n.reject,function(e){n.notify({index:s,value:e})}))},void 0),t===0&&n.resolve(e),n.promise})}function ot(e){return D(e,function(e){return e=c(e,L),D(st(c(e,function(e){return D(e,i,i)})),function(){return e})})}function ut(e){return L(e).allSettled()}function at(e,t){return L(e).then(void 0,void 0,t)}function ft(e,t){return L(e).nodeify(t)}var e=!1;try{throw new Error}catch(t){e=!!t.stack}var n=C(),r,i=function(){},s=function(){function o(){while(e.next){e=e.next;var t=e.task;e.task=void 0;var r=e.domain;r&&(e.domain=void 0,r.enter());try{t()}catch(s){if(i)throw r&&r.exit(),setTimeout(o,0),r&&r.enter(),s;setTimeout(function(){throw s},0)}r&&r.exit()}n=!1}var e={task:void 0,next:null},t=e,n=!1,r=void 0,i=!1;s=function(e){t=t.next={task:e,domain:i&&process.domain,next:null},n||(n=!0,r())};if(typeof process!="undefined"&&process.nextTick)i=!0,r=function(){process.nextTick(o)};else if(typeof setImmediate=="function")typeof window!="undefined"?r=setImmediate.bind(window,o):r=function(){setImmediate(o)};else if(typeof MessageChannel!="undefined"){var u=new MessageChannel;u.port1.onmessage=function(){r=a,u.port1.onmessage=o,o()};var a=function(){u.port2.postMessage(0)};r=function(){setTimeout(o,0),a()}}else r=function(){setTimeout(o,0)};return s}(),o=Function.call,a=u(Array.prototype.slice),f=u(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(arguments.length===1)do{if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}while(1);for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),l=u(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),c=u(Array.prototype.map||function(e,t){var n=this,r=[];return f(n,function(i,s,o){r.push(e.call(t,s,o,n))},void 0),r}),h=Object.create||function(e){function t(){}return t.prototype=e,new t},p=u(Object.prototype.hasOwnProperty),d=Object.keys||function(e){var t=[];for(var n in e)p(e,n)&&t.push(n);return t},v=u(Object.prototype.toString),y;typeof ReturnValue!="undefined"?y=ReturnValue:y=function(e){this.value=e};var b;try{new Function("(function* (){ yield 1; })"),b=!0}catch(t){b=!1}var w="From previous event:";L.resolve=L,L.nextTick=s,L.longStackSupport=!1,L.defer=A,A.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(a(arguments,1)):e.resolve(n)}},L.promise=O,L.passByCopy=function(e){return e},_.prototype.passByCopy=function(){return this},L.join=function(e,t){return L(e).join(t)},_.prototype.join=function(e){return L([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},L.race=M,_.prototype.race=function(){return this.then(L.race)},L.makePromise=_,_.prototype.toString=function(){return"[object Promise]"},_.prototype.then=function(e,t,n){function u(t){try{return typeof e=="function"?e(t):t}catch(n){return K(n)}}function a(e){if(typeof t=="function"){E(e,r);try{return t(e)}catch(n){return K(n)}}return K(e)}function f(e){return typeof n=="function"?n(e):e}var r=this,i=A(),o=!1;return s(function(){r.promiseDispatch(function(e){if(o)return;o=!0,i.resolve(u(e))},"when",[function(e){if(o)return;o=!0,i.resolve(a(e))}])}),r.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=f(e)}catch(r){n=!0;if(!L.onerror)throw r;L.onerror(r)}n||i.notify(t)}]),i.promise},L.when=D,_.prototype.thenResolve=function(e){return this.then(function(){return e})},L.thenResolve=function(e,t){return L(e).thenResolve(t)},_.prototype.thenReject=function(e){return this.then(function(){throw e})},L.thenReject=function(e,t){return L(e).thenReject(t)},L.nearer=P,L.isPromise=H,L.isPromiseAlike=B,L.isPending=j,_.prototype.isPending=function(){return this.inspect().state==="pending"},L.isFulfilled=F,_.prototype.isFulfilled=function(){return this.inspect().state==="fulfilled"},L.isRejected=I,_.prototype.isRejected=function(){return this.inspect().state==="rejected"};var q=[],R=[],U=!1,z=!0;L.resetUnhandledRejections=V,L.getUnhandledReasons=function(){return q.slice()},L.stopUnhandledRejectionTracking=function(){V(),typeof process!="undefined"&&process.on&&process.removeListener("exit",X),z=!1},V(),L.reject=K,L.fulfill=Q,L.master=Y,L.spread=Z,_.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},L.async=et,L.spawn=tt,L["return"]=nt,L.promised=rt,L.dispatch=it,_.prototype.dispatch=function(e,t){var n=this,r=A();return s(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},L.get=function(e,t){return L(e).dispatch("get",[t])},_.prototype.get=function(e){return this.dispatch("get",[e])},L.set=function(e,t,n){return L(e).dispatch("set",[t,n])},_.prototype.set=function(e,t){return this.dispatch("set",[e,t])},L.del=L["delete"]=function(e,t){return L(e).dispatch("delete",[t])},_.prototype.del=_.prototype["delete"]=function(e){return this.dispatch("delete",[e])},L.mapply=L.post=function(e,t,n){return L(e).dispatch("post",[t,n])},_.prototype.mapply=_.prototype.post=function(e,t){return this.dispatch("post",[e,t])},L.send=L.mcall=L.invoke=function(e,t){return L(e).dispatch("post",[t,a(arguments,2)])},_.prototype.send=_.prototype.mcall=_.prototype.invoke=function(e){return this.dispatch("post",[e,a(arguments,1)])},L.fapply=function(e,t){return L(e).dispatch("apply",[void 0,t])},_.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},L["try"]=L.fcall=function(e){return L(e).dispatch("apply",[void 0,a(arguments,1)])},_.prototype.fcall=function(){return this.dispatch("apply",[void 0,a(arguments)])},L.fbind=function(e){var t=L(e),n=a(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(a(arguments))])}},_.prototype.fbind=function(){var e=this,t=a(arguments);return function(){return e.dispatch("apply",[this,t.concat(a(arguments))])}},L.keys=function(e){return L(e).dispatch("keys",[])},_.prototype.keys=function(){return this.dispatch("keys",[])},L.all=st,_.prototype.all=function(){return st(this)},L.allResolved=k(ot,"allResolved","allSettled"),_.prototype.allResolved=function(){return ot(this)},L.allSettled=ut,_.prototype.allSettled=function(){return this.then(function(e){return st(c(e,function(e){function t(){return e.inspect()}return e=L(e),e.then(t,t)}))})},L.fail=L["catch"]=function(e,t){return L(e).then(void 0,t)},_.prototype.fail=_.prototype["catch"]=function(e){return this.then(void 0,e)},L.progress=at,_.prototype.progress=function(e){return this.then(void 0,void 0,e)},L.fin=L["finally"]=function(e,t){return L(e)["finally"](t)},_.prototype.fin=_.prototype["finally"]=function(e){return e=L(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},L.done=function(e,t,n,r){return L(e).done(t,n,r)},_.prototype.done=function(e,t,n){var r=function(e){s(function(){E(e,i);if(!L.onerror)throw e;L.onerror(e)})},i=e||t||n?this.then(e,t,n):this;typeof process=="object"&&process&&process.domain&&(r=process.domain.bind(r)),i.then(void 0,r)},L.timeout=function(e,t,n){return L(e).timeout(t,n)},_.prototype.timeout=function(e,t){var n=A(),r=setTimeout(function(){n.reject(new Error(t||"Timed out after "+e+" ms"))},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},L.delay=function(e,t){return t===void 0&&(t=e,e=void 0),L(e).delay(t)},_.prototype.delay=function(e){return this.then(function(t){var n=A();return setTimeout(function(){n.resolve(t)},e),n.promise})},L.nfapply=function(e,t){return L(e).nfapply(t)},_.prototype.nfapply=function(e){var t=A(),n=a(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},L.nfcall=function(e){var t=a(arguments,1);return L(e).nfapply(t)},_.prototype.nfcall=function(){var e=a(arguments),t=A();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},L.nfbind=L.denodeify=function(e){var t=a(arguments,1);return function(){var n=t.concat(a(arguments)),r=A();return n.push(r.makeNodeResolver()),L(e).fapply(n).fail(r.reject),r.promise}},_.prototype.nfbind=_.prototype.denodeify=function(){var e=a(arguments);return e.unshift(this),L.denodeify.apply(void 0,e)},L.nbind=function(e,t){var n=a(arguments,2);return function(){function s(){return e.apply(t,arguments)}var r=n.concat(a(arguments)),i=A();return r.push(i.makeNodeResolver()),L(s).fapply(r).fail(i.reject),i.promise}},_.prototype.nbind=function(){var e=a(arguments,0);return e.unshift(this),L.nbind.apply(void 0,e)},L.nmapply=L.npost=function(e,t,n){return L(e).npost(t,n)},_.prototype.nmapply=_.prototype.npost=function(e,t){var n=a(t||[]),r=A();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},L.nsend=L.nmcall=L.ninvoke=function(e,t){var n=a(arguments,2),r=A();return n.push(r.makeNodeResolver()),L(e).dispatch("post",[t,n]).fail(r.reject),r.promise},_.prototype.nsend=_.prototype.nmcall=_.prototype.ninvoke=function(e){var t=a(arguments,1),n=A();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},L.nodeify=ft,_.prototype.nodeify=function(e){if(!e)return this;this.then(function(t){s(function(){e(null,t)})},function(t){s(function(){e(t)})})};var lt=C();return L}),function(){n("lib/utils/promises",["promises"],function(e){return{deferred:e.defer,when:e.when,all:e.all}})}.call(this),function(){var e,t;if(/hull-auth-status-/.test(document.location.hash)&&window.opener&&window.opener.Hull)try{e=document.location.hash.replace("#hull-auth-status-",""),t=window.opener.__hull_login_status__,t(e),window.close()}catch(r){console.warn("Error: "+r)}n("lib/api/auth",["underscore","../utils/promises","../utils/version"],function(e,t,n){return function(r,i,s){var o,u,a,f,l,c,h,p;return s==null&&(s=[]),u=null,p=null,f=function(n,r,o){var a;o==null&&(o=function(){});if(c.isAuthenticating())return c.isAuthenticating();if(!e.isString(n))throw"The provider name must be a String";n=n.toLowerCase();if(!~e.indexOf(s,n+"_app"))throw"No authentication service "+n+" configured for the app";return u=t.deferred(),u.providerName=n,e.isFunction(o)&&u.promise.done(o),a=c.authUrl(i,n,r),c.authHelper(a),u.promise},l=function(t){var n;return t==null&&(t=function(){}),n=r("logout"),n.done(function(){if(e.isFunction(t))return t()}),n},h=function(e){var t;t=u;if(!u)return;return e?u.resolve({}):u.reject("Login canceled"),u=null,clearInterval(p),p=null,t},a=function(t,r,i){var s,o;return s=i||{},s.app_id=t.appId,s.callback_url=t.callback_url||t.callbackUrl||c.location.toString(),s.auth_referer=c.location.toString(),s.callback_name=c.createCallback(),s.version=n,o=e.map(s,function(e,t){return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&"),""+t.orgUrl+"/auth/"+r+"?"+o},c={isAuthenticating:function(){return u!=null},location:document.location,authUrl:a,createCallback:function(){var t,n;return n="__h__"+Math.random().toString(36).substr(2),t=function(e){var t;return window.__hull_login_status__=void 0,t=e===n,h.call(void 0,t)},window.__hull_login_status__=e.bind(t,void 0),n},authHelper:function(e){var t;return t=window.open(e,"_auth","location=0,status=0,width=990,height=600"),p=setInterval(function(){if(t!=null?t.closed:void 0)return h()},200)},onCompleteAuth:h},o={login:f,logout:l,isAuthenticating:c.isAuthenticating},o}})}.call(this),function(e){function v(e){return Object.prototype.toString.call(e)==="[object Array]"}function m(e){return typeof e=="undefined"}function g(e){if(!e)throw new Error("url is undefined or empty");if(/^file/.test(e))throw new Error("The file:// protocol is not supported");var t=e.toLowerCase().match(f);if(t){var n=t[2],r=t[3],i=t[4]||"";if(n==="http:"&&i===":80"||n==="https:"&&i===":443")i="";return n+"//"+r+i}return e}function y(e){if(!e)throw new Error("url is undefined or empty");e=e.replace(c,"$1/");if(!e.match(/^(http||https):\/\//)){var t=e.substring(0,1)==="/"?"":location.pathname;t.substring(t.length-1)!=="/"&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=location.protocol+"//"+location.host+t+e}while(l.test(e))e=e.replace(l,"");return e}function b(e,t,n){var r;for(var i in t)t.hasOwnProperty(i)&&(i in e?(r=t[i],typeof r=="object"?b(e[i],r,n):n||(e[i]=t[i])):e[i]=t[i]);return e}function w(e,t){typeof e=="string"&&(e=[e]);var n,r=e.length;while(r--){n=e[r],n=new RegExp(n.substr(0,1)==="^"?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$");if(n.test(t))return!0}return!1}function E(e,t){if(!t)throw new Error("parameters is undefined or null");var n=e.indexOf("#"),r=[];for(var i in t)t.hasOwnProperty(i)&&r.push(i+"="+encodeURIComponent(t[i]));return e+(n===-1?"#":"&")+r.join("&")}function S(e){var t=o.cloneNode(!1);b(e.props,{frameBorder:0,allowTransparency:!0,scrolling:"no",width:"100%",src:E(e.remote,{xdm_e:g(location.href),xdm_c:e.channel,xdm_p:1}),name:s+e.channel+"_provider",style:{margin:0,padding:0,border:0}}),t.id=e.props.name,delete e.props.name;if(!e.container)throw new Error('xdm.Rpc() configuration object missing a DOM "container" property');return b(t,e.props),e.container.appendChild(t),e.onLoad&&h(t,"load",e.onLoad),e.html&&(t.contentWindow.document.open(),t.contentWindow.document.write(e.html),t.contentWindow.document.close()),e.iframe=t,t}function x(e){var t;e.isHost=e.isHost||m(d.xdm_p),e.props=e.props||{};if(!e.isHost){e.channel=d.xdm_c.replace(/["'<>\\]/g,""),e.remote=d.xdm_e.replace(/["'<>\\]/g,"");if(e.acl&&!w(e.acl,e.remote))throw new Error("Access denied for "+e.remote)}else e.remote=y(e.remote),e.channel=e.channel||"default"+u++;return t=[new r.stack.PostMessageTransport(e)],t.push(new r.stack.QueueBehavior(!0)),t}function T(e){var t,n,r=e.length,i={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(n=0;n<r;n++)t=e[n],b(t,i,!0),n!==0&&(t.down=e[n-1]),n!==r-1&&(t.up=e[n+1]);return t}function N(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}if(!e.postMessage)return;var t="",r={},i=e.xdm,s="xdm_",o=document.createElement("IFRAME"),u=Math.floor(Math.random()*1e4),a=Function.prototype,f=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,l=/[\-\w]+\/\.\.\//,c=/([^:])\/\//g,h=function(){return e.addEventListener?function(e,t,n){e.addEventListener(t,n,!1)}:function(e,t,n){e.attachEvent("on"+t,n)}}(),p=function(){return e.removeEventListener?function(e,t,n){e.removeEventListener(t,n,!1)}:function(e,t,n){e.detachEvent("on"+t,n)}}(),d=function(e){e=e.substring(1,e.length).split("&");var t={},n,r=e.length;while(r--)n=e[r].split("="),t[n[0]]=decodeURIComponent(n[1]);return t}(location.hash);r.version="1.0.1",r.stack={},r.query=d,r.checkAcl=w,r.noConflict=function(n){return e.xdm=i,t=n,t&&(s="xdm_"+t.replace(".","_")+"_"),r},r.Rpc=function(e,t){var n;if(t.local)for(var i in t.local)t.local.hasOwnProperty(i)&&(n=t.local[i],typeof n=="function"&&(t.local[i]={method:n}));var s=T(x(e).concat([new r.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=g(e.remote),this.destroy=function(){s.destroy()},s.init(),this.iframe=e.iframe},r.stack.PostMessageTransport=function(t){function o(e){var r=g(e.origin),i=typeof e.data=="string";r===s&&i&&e.data.substring(0,t.channel.length+1)===t.channel+" "&&n.up.incoming(e.data.substring(t.channel.length+1),r)}var n,r,i,s;return n={outgoing:function(e,n,r){i.postMessage(t.channel+" "+e,n||s),r&&r()},destroy:function(){p(e,"message",o),r&&(i=null,r.parentNode.removeChild(r),r=null)},init:function(){s=g(t.remote);if(t.isHost){var u=function(s){s.data===t.channel+"-ready"&&("postMessage"in r.contentWindow?i=r.contentWindow:i=r.contentWindow.document,p(e,"message",u),h(e,"message",o),setTimeout(function(){n.up.callback(!0)},0))};h(e,"message",u),r=S(t)}else h(e,"message",o),"postMessage"in e.parent?i=e.parent:i=e.parent.document,i.postMessage(t.channel+"-ready",s),setTimeout(function(){n.up.callback(!0)},0)}},n},r.stack.QueueBehavior=function(e){function o(){var i;if(e===!0&&n.length===0){N(t);return}if(r||n.length===0||s)return;r=!0,i=n.shift(),t.down.outgoing(i.data,i.origin,function(e){r=!1,i.callback&&setTimeout(function(){i.callback(e)},0),o()})}var t,n=[],r=!0,i="",s;return t={init:function(){t.down.init()},callback:function(e){r=!1;var n=t.up;o(),n.callback(e)},incoming:function(e,n){t.up.incoming(e,n)},outgoing:function(e,t,r){n.push({data:e,origin:t,callback:r}),o()},destroy:function(){s=!0,t.down.destroy()}},t},r.stack.RpcBehavior=function(e,t){function s(e){e.jsonrpc="2.0",n.down.outgoing(JSON.stringify(e))}function o(e,t){var n=Array.prototype.slice;return function(){var o=arguments.length,u,a={method:t};o>0&&typeof arguments[o-1]=="function"?(o>1&&typeof arguments[o-2]=="function"?(u={success:arguments[o-2],error:arguments[o-1]},a.params=n.call(arguments,0,o-2)):(u={success:arguments[o-1]},a.params=n.call(arguments,0,o-1)),i[""+ ++r]=u,a.id=r):a.params=n.call(arguments,0),e.namedParams&&a.params.length===1&&(a.params=a.params[0]),s(a)}}function u(e,t,n,r){if(!n){t&&s({id:t,error:{code:-32601,message:"Procedure not found."}});return}var i,o;t?(i=function(e){i=a,s({id:t,result:e})},o=function(e,n){o=a;var r={id:t,error:{code:-32099,message:e}};n&&(r.error.data=n),s(r)}):i=o=a,v(r)||(r=[r]);try{var u=n.method.apply(n.scope,r.concat([i,o]));m(u)||i(u)}catch(f){o(f.message)}}var n,r=0,i={};return n={incoming:function(e,n){var r=JSON.parse(e),o;r.method?t.handle?t.handle(r,s):u(r.method,r.id,t.local[r.method],r.params):(o=i[r.id],r.error&&o.error?o.error(r.error):o.success&&o.success(r.result),delete i[r.id])},init:function(){if(t.remote)for(var r in t.remote)t.remote.hasOwnProperty(r)&&(e[r]=o(t.remote[r],r));n.down.init()},destroy:function(){for(var r in t.remote)t.remote.hasOwnProperty(r)&&e.hasOwnProperty(r)&&delete e[r];n.down.destroy()}},n},typeof exports=="object"?module.exports=r:typeof n=="function"&&n.amd?n("xdm",[],function(){return r}):e.xdm=r}(window),function(){n("lib/api/xdm",["domready","lib/utils/promises","xdm","lib/utils/version"],function(e,t,n,r){var i;return i=function(e){var t;return t=""+e.orgUrl+"/api/v1/"+e.appId+"/remote.html?v="+r,e.jsUrl&&(t+="&js="+e.jsUrl),e.uid&&(t+="&uid="+e.uid),e.appSecret&&(t+="&access_token="+e.appSecret),e.userHash!==void 0&&(t+="&user_hash="+e.userHash),t},function(r,s){var o,u,a,f,l,c;return l=null,f=null,o=t.deferred(),u=function(e){return console.log("remoteMessage",e),e.error?o.reject(e.error):console.warn("RPC Message",arguments)},c=function(e){e&&s.emit("hull.auth.login",e);if(!e)return s.emit("hull.auth.logout")},a=function(e){return window.clearTimeout(l),o.resolve({rpc:f,config:e})},e(function(){return l=setTimeout(function(){return o.reject('Remote loading has failed. Please check "orgUrl" and "appId" in your configuration. This may also be about connectivity.')},3e4),f=new n.Rpc({remote:i(r),container:document.body,props:{tabIndex:-1,height:"0",width:"1px",style:{position:"fixed",width:"0",top:"-20px",left:"-20px"}}},{remote:{message:{},ready:{}},local:{message:u,ready:a,userUpdate:c}})}),o.promise}})}.call(this),function(){n("lib/api/api",["underscore","../utils/cookies","../utils/version","../api/params","../api/auth","../utils/promises","lib/api/xdm"],function(e,t,n,r,i,s,o){var u;return u=Array.prototype.slice,{init:function(n,a){var f,l,c,h,p,d;return n==null&&(n={}),l=s.deferred(),!n.orgUrl||!n.appId?(n.orgUrl||l.reject(new ReferenceError("no organizationURL provided. Can't proceed")),n.appId||l.reject(new ReferenceError("no applicationID provided. Can't proceed")),l.promise):(c=null,f=function(){return c.apply(void 0,r.parse(u.call(arguments)))},e.each(["get","post","put","delete"],function(e){return f[e]=function(){var t,n;return t=r.parse(u.call(arguments)),n=t[0],n.method=e,c.apply(f,t)}}),f.parseRoute=r.parse,d=function(e){var r,i;e==null&&(e={});if(!n.appId)return;return r="hull_"+n.appId,e&&e["Hull-User-Id"]&&e["Hull-User-Sig"]?(i=btoa(JSON.stringify(e)),t.set(r,i,{path:"/"})):t.remove(r,{path:"/"})},h=function(e){var t,r,s,o;s=e.data,d(s.headers);if((o=s.headers)!=null?o["Hull-Auth-Scope"]:void 0)r=s.headers["Hull-Auth-Scope"].split(":")[0];return t={auth:i(f,n,e.services.types.auth),remoteConfig:e,authScope:r||"",api:f,init:function(){return l.promise}},l.resolve(t),!0},p=null,o(n,a).then(function(e){return p=e.rpc,h(e.config)},function(e){return l.reject(e)}),c=function(e,t,n){var r,i,o;return p||console.error("Api not initialized yet"),r=s.deferred(),o=function(e){return e==null&&(e={}),e.provider==="hull"&&d(e.headers),t(e.response),r.resolve(e.response,e.headers)},i=function(e){return e==null&&(e={}),n(e.message),r.reject(e.message)},p.message(e,o,i),r.promise},l.promise)}}})}.call(this),function(){n("lib/api/reporting",["underscore"],function(e){return{init:function(t){return{track:function(n,r){var i;return i=e.extend({url:window.location.href,referrer:document.referrer},r),t.api({provider:"track",path:n},"post",i)},flag:function(e){return t.api({provider:"hull",path:[e,"flag"].join("/")},"post")}}}}})}.call(this),function(){n("lib/utils/base64",[],function(){var e;return e=window,{utils:e,decode:function(t){return e.decodeURIComponent(e.escape(e.atob(t)))},encode:function(t){return e.btoa(e.unescape(e.encodeURIComponent(t)))},utilsContainer:window}})}.call(this),function(){n("lib/utils/entity",["underscore","lib/utils/base64"],function(e,t){return{decode:function(e){return/^~[a-z0-9_\-\+\/\=]+$/i.test(e)&&(e.length-1)%4===0?t.decode(e.substr(1),!0):e},encode:function(e){return"~"+t.encode(e,!0)}}})}.call(this),function(){n("lib/utils/config",["underscore"],function(e){var t,n;return n=function(e){if(e!==void 0)return JSON.parse(JSON.stringify(e))},t=function(t){return function(r){var i;return i=t,r?(e.each(r.split("."),function(t){return i===void 0?i:e.contains(e.keys(i),t)?i=i[t]:i=void 0}),n(i)):n(t)}},function(e){return t(e)}})}.call(this),function(){n("lib/api/current-user",[],function(){return function(e){var t;return t=!1,e.on("hull.init",function(e,n,r,i){return t=n}),e.on("hull.auth.login",function(e){return t=e}),e.on("hull.auth.logout",function(){return t=!1}),function(){return t}}})}.call(this),function(){var e=[].slice;n("flavour",["lib/utils/emitter","lib/api/api","lib/api/reporting","lib/utils/entity","lib/utils/config","lib/api/current-user"],function(t,n,r,i,s,o){var u,a;return u=function(a){var f;return f=t(),n.init(a,f).then(function(t){var n,l;return l=r.init(t),f.on("hull.auth.login",function(e){return l.track("hull.auth.login",e)}),f.on("hull.auth.logout",function(){return l.track("hull.auth.logout")}),n={config:s(a),on:f.on,off:f.off,emit:f.emit,track:l.track,flag:l.flag,api:t.api,currentUser:o(f),login:function(){var n,r;n=1<=arguments.length?e.call(arguments,0):[];if(t.auth.isAuthenticating()){console.info("Authentication is in progress. Use `Hull.on('hull.auth.login', fn)` to call `fn` when done.");return}return(r=t.auth).login.apply(r,n).then(function(){return t.api("me")},function(e){return f.emit("hull.auth.fail",e)})},logout:t.auth.logout,util:{entity:i,eventEmitter:f}},n.api.create=u,{raw:t,api:n,eventEmitter:f}})},a=function(e){throw console.error("Unable to start Hull.api",e.message),e},{init:function(e){return u(e)},success:function(e){return{exports:e.api,context:{me:e.raw.remoteConfig.data.me,app:e.raw.remoteConfig.data.app,org:e.raw.remoteConfig.data.org}}},failure:a}})}.call(this),function(){var e,n,r,s,o,u,a,f,l,c,h,p,d,v,m,g,y=[].slice;e=typeof i!="undefined"&&i!==null?i:"",d=null,s=null,n=function(){var e,t;return t=!1,e=[],{run:function(n){return t?n():e.push(n)},unlock:function(){var n,r,i,s;t=!0,s=[];for(r=0,i=e.length;r<i;r++)n=e[r],s.push(n());return s}}},g=g||{},r=function(e){var t;return(t=g[e])==null&&(g[e]=[]),function(){var t;return t=1<=arguments.length?y.call(arguments,0):[],g[e].push(t)}},o=function(e){return delete g[e]},h=function(e,t){var n,r,i,s;s=g[e];for(r=0,i=s.length;r<i;r++)n=s[r],t[e].apply(t,n);return o(e)},l=n(),m=!1,c=function(e,t,n,r){if(e&&m)throw new Error("Hull.init can be called only once");return e&&(m=!0),l.run(function(){var i,o,a;return i=d({},t),i.namespace="hull",i.debug=t.debug&&{enable:!0},a=function(){var r;return r=1<=arguments.length?y.call(arguments,0):[],p.apply(null,[t,e,n||function(){}].concat(r))},o=function(){var t;return t=1<=arguments.length?y.call(arguments,0):[],u.apply(null,[e,r||function(){}].concat(t))},s.init(i).then(a,o).done()})},a=function(){var e,t;return t=arguments[0],e=2<=arguments.length?y.call(arguments,1):[],t.apiOnly=!0,c.apply(null,[!1,t].concat(e))},f=function(){var e,t;return t=arguments[0],e=2<=arguments.length?y.call(arguments,1):[],c.apply(null,[!0,t].concat(e))},v=window.Hull={on:r("on"),track:r("track"),init:f},v.init.api=a,e==="client"&&(v.component=r("component")),p=function(){var t,n,r,i,o,u,a;return n=arguments[0],i=arguments[1],o=arguments[2],t=4<=arguments.length?y.call(arguments,3):[],r=s.success.apply(s,t),u=d({},n),a=d({},v,r.exports),i?(window.Hull=a,h("on",a),h("track",a),e==="client"&&h("component",a)):delete a.component,a.emit("hull.init",a,r.context.me,r.context.app,r.context.org),o(a,r.context.me,r.context.app,r.context.org),a},u=function(){var e,t,n,r;return n=arguments[0],r=arguments[1],t=arguments[2],e=4<=arguments.length?y.call(arguments,3):[],s.failure(t),r.apply(null,[t].concat(e))},t(["flavour","underscore","lib/utils/version"],function(e,t,n){return v.version=n,d=t.extend,s=e,l.unlock()})}.call(this),n("lib/bootstrap",function(){})}).call(r)})();